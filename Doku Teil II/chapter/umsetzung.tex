\chapter{Umsetzung und Ergebnisse}
\label{cha:umsetzung}

%Je nach Art der Arbeit kann diese Kapitelüberschrift auch \glqq Ergebnisse\grqq~lauten, z.~B. bei rein messtechnischen Aufgaben.

%Beschreibung der Umsetzung des zuvor gewählten Vorgehens (theoretische Untersuchung, Erhebungen, Durchführung von Experimenten, Prototypenaufbau, Implementierung eines Prozesses, etc.).

%Verifikation anhand der zuvor erarbeiteten Anforderungen und Validierung in Bezug auf das zuvor gestellte Ziel. Diskussion der Ergebnisse. Spätestens hier auch auf die Zuverlässigkeit der gewonnenen Erkenntnisse eingehen (z.~B. anhand der Genauigkeit von Messergebnissen).
\section{Mechanischer Aufbau des LEGO-Spike-4-Gewinnt-Roboters}


Für die Umsetzung des 4-Gewinnt-Roboters wurde eine mechanische Konstruktion gewählt, die es erlaubt, das Spielfeld zu scannen sowie Chips gezielt in eine Spalte einzuwerfen. Der Aufbau umfasst drei LEGO Spike-Motoren, einen Farbsensor und einen Drucktaster. Im Folgenden werden die einzelnen Komponenten detailliert beschrieben.

\begin{itemize}
	\item \textbf{Horizontalantrieb – Motor D}\\
	Der horizontale Antrieb des Farbsensors erfolgt über Motor D. Dieser ist dafür zuständig, die Spielfeldspalten nacheinander anzufahren. Der Motor ist mit einer Achse verbunden, welche zwei Räder antreiben. Die Bewegung erfolgt in gleichmäßigen Schritten: Eine Drehung um exakt 72 Grad bewegt den Schlitten um eine Spalte weiter. Diese Schrittweite wurde so gewählt, dass sie der Breite einer Spalte im Spielfeld entspricht. Dadurch ist eine exakte Positionierung des Sensors über jeder Spalte möglich, ohne dass zusätzliche Sensoren zur Positionsbestimmung notwendig sind. 
	\item \textbf{Vertikalantrieb – Motor E, Kette und Farbsensor}\\
	 Um das Spielfeld auch in vertikaler Richtung abfahren zu können, ist der Farbsensor an einer Kette montiert. Diese Kette wird durch Motor E angetrieben. Der Sensor ist an einem mittleren Segment der Kette befestigt und fährt beim Drehen der Kette entsprechend auf und ab. Ein Schritt des Motors um etwa 95 Grad bewegt den Sensor um genau eine Spielfeldhöhe weiter. Auf diese Weise können sämtliche sechs Reihen der aktuellen Spalte nacheinander abgescannt werden. Der Sensor wurde dabei so montiert, dass er exakt über der Mitte jedes Feldes positioniert ist, um eine zuverlässige Farberkennung zu ermöglichen. Die Rückwärtsbewegung der Kette erlaubt es, den Sensor wieder nach unten zu fahren.
	\item \textbf{Chipauswerfer – Motor A}\\
	Das Einwerfen des eigenen Spielsteins erfolgt über Motor A. An diesem Motor ist eine Stange montiert, die bei einer vollständigen Umdrehung einen Spielchip aus dem Vorratsmagazin in die gewünschte Spalte stößt. Nach der Auslösung kann ein neuer Chip in die Abschussposition nachrutschen. In der Software ist eine Wartezeit nach dem Auslösen eingebaut, damit der Chip sicher im Spielfeld ankommt, bevor die nächste Aktion beginnt.
	\item \textbf{Startsignal – Drucksensor (Force Sensor)}\\
	Um dem Roboter mitzuteilen, dass der menschliche Spieler seinen Zug abgeschlossen hat, wurde ein Drucksensor verwendet. Dieser befindet sich an der Vorderseite des Roboters. Sobald der Spieler den Sensor leicht berührt, wird ein Signal ausgelöst, das Prozess startet. 
	\item \textbf{Spielfeldscan – Farbsensor an Kette}\\
	 Für die Farberkennung des Spielfeldes wurde ein LEGO-Farbsensor verwendet, der über die oben beschriebene Kettenkonstruktion vertikal verfahrbar ist. Die Farbmessung erfolgt jeweils in der Mitte eines Spielfeldes. Der Sensor erkennt RGB-Werte, die per Software verschiedenen Spielsteinfarben (in diesem Projekt benutzt: Rot, Gelb oder Leer) zugeordnet werden. Während des Spiels vergleicht der Algorithmus die gemessenen Werte mit diesen Referenzwerten, um die tatsächliche Belegung jedes Feldes möglichst robust zu bestimmen. Der Abstand zwischen Sensor und Spielfeld beträgt etwa 7 mm – dieser Wert hat sich als optimal für zuverlässige Farbmessung erwiesen.
\end{itemize}
\textbf{Zusammenfassung}\\
Die mechanische Konstruktion basiert auf einem kartesischen Koordinatensystem, bei dem der Sensor durch die Kombination aus horizontaler (Motor D) und vertikaler Bewegung (Motor E + Kette) jede Spielfeldposition präzise anfahren kann. Das System erlaubt eine vollautomatische Spielweise: Der Roboter erkennt die aktuelle Spielsituation, berechnet den optimalen Zug und setzt diesen physisch um.


\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\linewidth]{images/188CF006-D571-4F2D-9337-8C4BDD7DAAEF_1_105_c}
	\caption{Seitenansicht links}
	\label{fig:188cf006-d571-4f2d-9337-8c4bdd7daaef1105c}
\end{figure}


\begin{figure}[H]
	\centering
	\includegraphics[width=0.5\linewidth]{images/DAE26A50-277E-4C6B-96A3-F2DE2CC9C004_1_105_c}
	\caption{Seitenansicht rechts}
	\label{fig:dae26a50-277e-4c6b-96a3-f2de2cc9c0041105c}
\end{figure}


\section{Software}
Im Kapitel Software wird genauer beschrieben, wie die Programmierung des Vier-Gewinnt-Roboters umgesetzt ist. Die Software bildet das Kernstück des Roboters und ist entscheidend dafür, dass dieser eigenständig am Spiel teilnehmen kann.



\tikzstyle{startstop} = [ellipse, draw, fill=gray!10, minimum width=3cm, minimum height=1cm]
\tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium right angle=110, draw, fill=blue!10, minimum width=3cm, minimum height=1cm]
\tikzstyle{process} = [rectangle, draw, fill=orange!10, minimum width=3cm, minimum height=1cm]
\tikzstyle{decision} = [diamond, draw, fill=green!10, aspect=2, minimum width=3cm, minimum height=1cm]
\tikzstyle{arrow} = [thick,->,>=Stealth]

\begin{figure}[H]

\begin{tikzpicture}[node distance=2cm]
	\node (start) [startstop] {Start};
	\node (wait) [process, below of=start] {Warten auf Sensor-Aktivierung};
	\node (move) [process, below of=wait] {Spielfeld anfahren};
	\node (scan) [process, below of=move] {Spalten scannen};
	\node (update) [process, below of=scan] {Board-Update};
	\node (opponent) [decision, below of=update, yshift=-0.7cm] {Neuer gegnerischer Stein?};
	\node (calc) [process, below of=opponent, yshift=-0.7cm] {Optimalen Zug berechnen (Alpha-Beta)};
	\node (motor) [process, below of=calc] {Motorsteuerung: Stein platzieren};
	\node (win) [decision, below of=motor, yshift=-0.7cm] {Gewonnen?};
	\node (congrats) [startstop, right of=win, xshift=5cm] {Glückwunsch! Spiel gewonnen};
	\node (print) [process, below of=win] {Spielfeld ausgeben};

	
	\draw [arrow] (start) -- (wait);
	\draw [arrow] (wait) -- (move);
	\draw [arrow] (move) -- (scan);
	\draw [arrow] (scan) -- (update);
	\draw [arrow] (update) -- (opponent);
	\draw [arrow] (opponent) -- node[right] {Ja/Nein} (calc);
	\draw [arrow] (calc) -- (motor);
	\draw [arrow] (motor) -- (win);
	\draw [arrow] (win) -- node[above] {Ja} (congrats);
	\draw [arrow] (win) -- node[right] {Nein} (print);
	\draw [arrow] (congrats) |- (print);
	\draw [arrow] (print.west) -| ($(wait.west)+(-1.5,0)$) -- (wait.west);
	
\end{tikzpicture}

	\caption[Flussdiagramm]{Flussdiagramm der Software}
\label{fig:Flussdiagramm}
\end{figure}